---

# host/<hostname>/home dir
- name: Check home dir (host)
  delegate_to: 127.0.0.1
  ansible.builtin.stat:
    path: "{{ item.localpath }}/host/{{ inventory_hostname }}/home/"
  register: host_homedir

- name: Sync home dir (host)
  ansible.posix.synchronize:
    src: "{{ item.localpath }}/host/{{ inventory_hostname }}/home/"
    dest: ~/
    checksum: true
    times: false
  when: host_homedir.stat.exists

# host/<hostname>/etc dir
- name: Check etc dir (host)
  delegate_to: 127.0.0.1
  ansible.builtin.stat:
    path: "{{ item.localpath }}/host/{{ inventory_hostname }}/etc/"
  register: host_etcdir
- name: Sync etc dir (host)
  become: true
  ansible.posix.synchronize:
    src: "{{ item.localpath }}/host/{{ inventory_hostname }}/etc/"
    dest: /etc/
    owner: false
    group: false
    checksum: true
    times: false
  when: host_etcdir.stat.exists

...
