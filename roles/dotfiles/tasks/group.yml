---

# group/<group>/home dir
- name: Check home dir (group)
  delegate_to: 127.0.0.1
  ansible.builtin.stat:
    path: "{{ item[0].localpath }}/group/{{ item[1] }}/home/"
  register: group_homedir
- name: Sync home dir (group)
  ansible.posix.synchronize:
    src: "{{ item[0].localpath }}/group/{{ item[1] }}/home/"
    dest: ~/
    checksum: true
    times: false
  when: group_homedir.stat.exists
# group/<group>/etc dir
- name: Check etc dir (group)
  delegate_to: 127.0.0.1
  ansible.builtin.stat:
    path: "{{ item[0].localpath }}/group/{{ item[1] }}/etc/"
  register: group_etcdir
- name: Sync etc dir (group)
  become: true
  ansible.posix.synchronize:
    src: "{{ item[0].localpath }}/group/{{ item[1] }}/etc/"
    dest: /etc/
    owner: false
    group: false
    checksum: true
    times: false
  when: group_etcdir.stat.exists

...
