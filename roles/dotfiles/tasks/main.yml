---

- block:
    - name: get dotfiles
      delegate_to: 127.0.0.1
      git:
        repo: "{{ item.repo }}"
        dest: "{{ item.localpath }}"
        force: yes
        accept_hostkey: yes
      loop: "{{ files_repos }}"
 

    # byType/<type>/{home,etc} dirs
    - include_tasks: byGroup.yml
      #loop: "{{ files_repos | product (group_names) | list }}"    #the 'all' group isn't in the host's group_names, workaround:
      loop: "{{ files_repos | product ( ['all'] | union(group_names)) | list }}"

    # byHostname/<hostname>/{home,etc} dirs
    - include_tasks: byHostname.yml
      loop: "{{ files_repos }}"

  tags: [ dotfiles, configs ]


...
